document.addEventListener("DOMContentLoaded",()=>{const t=null!=navigator.userAgent.match(/iPhone/i),e=null!=navigator.userAgent.match(/iPad/i),o=null!=navigator.userAgent.match(/iPod/i);let n=()=>{let t=window.scrollY;document.querySelector("html").style.scrollBehavior="auto",document.body.classList.add("ios-lock"),document.body.dataset.position=t,document.body.style.top=-t+"px"},l=()=>{let t=parseInt(document.body.dataset.position,10);document.body.style.top="auto",document.body.classList.remove("ios-lock"),window.scroll({top:t,left:0}),document.querySelector("html").removeAttribute("style"),document.body.removeAttribute("data-position")};const c=document.querySelectorAll(".animate-item"),s=(t,e,o)=>{let n=t.getBoundingClientRect();n.top+n.height-n.height*o>0&&window.innerHeight-n.top-n.height*e>0?t.classList.add("animated"):t.hasAttribute("data-animation-once")||t.classList.remove("animated")};0!=c.length&&(c.forEach(t=>{s(t,.5,.5)}),document.addEventListener("scroll",()=>{c.forEach(t=>{s(t,.5,.5)})}));const i=document.querySelector("body"),d=document.querySelectorAll(".modal-btn"),a=document.querySelectorAll(".fixed-padding"),r=document.querySelectorAll(".close-modal");let m,u,h,p=!0,y=!1;if(d.length>0)for(let t=0;t<d.length;t++){const e=d[t];e.addEventListener("click",(function(t){const o=e.dataset.path,n=document.getElementById(o);null!=n?(f(n),setTimeout(()=>{r.forEach(t=>{t.focus()})},100),t.preventDefault()):console.log("Модальное окно не существует! "+n)}))}if(r.length>0)for(let t=0;t<r.length;t++){const e=r[t];m=e,e.addEventListener("click",(function(t){g(e.closest(".modal")),t.preventDefault()}))}function f(l){if(l&&p){h=document.activeElement;const c=document.querySelector(".modal.open");c?g(c,!1):function(){const l=window.innerWidth-i.offsetWidth+"px";if(a.length>0)for(let t=0;t<a.length;t++){a[t].style.paddingRight=l}i.style.paddingRight=l,i.classList.contains("lock")?u=!1:(u=!0,t||e||o?n():i.classList.add("lock"));p=!1,setTimeout((function(){p=!0}),800)}(),l.classList.add("open"),l.addEventListener("mousedown",(function(t){!1===y?(t.target.closest(".modal__content")||g(t.target.closest(".modal")),y=!0):setTimeout(()=>{y=!1},800)}))}}function g(n,c=!0){p&&(n.classList.remove("open"),c&&setTimeout((function(){if(a.length>0)for(let t=0;t<a.length;t++)a[t].style.paddingRight="0px";i.style.paddingRight="0px",1==u&&(t||e||o?l():i.classList.remove("lock"))}),800)),setTimeout((function(){h.focus()}),800)}document.addEventListener("keydown",(function(t){if(document.querySelector(".modal.open")&&27===t.which){g(document.querySelector(".modal.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)});
//# sourceMappingURL=main.js.map
